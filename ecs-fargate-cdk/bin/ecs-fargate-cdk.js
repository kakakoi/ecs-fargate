#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("@aws-cdk/core");
const ecs_fargate_stack_1 = require("../lib/ecs-fargate-stack");
const network_stack_1 = require("../lib/network-stack");
const rds_stack_1 = require("../lib/rds-stack");
const app = new cdk.App();
const networkStack = new network_stack_1.NetworkStack(app, 'NetworkStack', {
    env: { account: process.env.CDK_DEFAULT_ACCOUNT, region: process.env.CDK_DEFAULT_REGION },
});
const ecsStack = new ecs_fargate_stack_1.EcsFargateStack(app, 'EcsFargateStack', {
    vpc: networkStack.vpc,
    env: { account: process.env.CDK_DEFAULT_ACCOUNT, region: process.env.CDK_DEFAULT_REGION },
});
new rds_stack_1.RdsStack(app, 'RdsStack', {
    vpc: networkStack.vpc,
    bastionSecurityGroup: networkStack.bastionSecurityGroup,
    dbIngressSecurityGroup: networkStack.dbIngressSecurityGroup,
    env: {
        account: process.env.CDK_DEFAULT_ACCOUNT,
        region: process.env.CDK_DEFAULT_REGION
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWNzLWZhcmdhdGUtY2RrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZWNzLWZhcmdhdGUtY2RrLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHVDQUFxQztBQUNyQyxxQ0FBcUM7QUFDckMsZ0VBQTJEO0FBQzNELHdEQUFvRDtBQUNwRCxnREFBNEM7QUFFNUMsTUFBTSxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7QUFFMUIsTUFBTSxZQUFZLEdBQUcsSUFBSSw0QkFBWSxDQUFDLEdBQUcsRUFBRSxjQUFjLEVBQUU7SUFDekQsR0FBRyxFQUFFLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLEVBQUU7Q0FDMUYsQ0FBQyxDQUFDO0FBRUgsTUFBTSxRQUFRLEdBQUcsSUFBSSxtQ0FBZSxDQUFDLEdBQUcsRUFBRSxpQkFBaUIsRUFBRTtJQUMzRCxHQUFHLEVBQUUsWUFBWSxDQUFDLEdBQUc7SUFDckIsR0FBRyxFQUFFLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLEVBQUU7Q0FDMUYsQ0FBQyxDQUFDO0FBRUgsSUFBSSxvQkFBUSxDQUFDLEdBQUcsRUFBRSxVQUFVLEVBQUU7SUFDNUIsR0FBRyxFQUFFLFlBQVksQ0FBQyxHQUFHO0lBQ3JCLG9CQUFvQixFQUFFLFlBQVksQ0FBQyxvQkFBb0I7SUFDdkQsc0JBQXNCLEVBQUUsWUFBWSxDQUFDLHNCQUFzQjtJQUMzRCxHQUFHLEVBQUU7UUFDSCxPQUFPLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUI7UUFDeEMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWtCO0tBQ3ZDO0NBQ0YsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxuaW1wb3J0ICdzb3VyY2UtbWFwLXN1cHBvcnQvcmVnaXN0ZXInO1xuaW1wb3J0ICogYXMgY2RrIGZyb20gJ0Bhd3MtY2RrL2NvcmUnO1xuaW1wb3J0IHsgRWNzRmFyZ2F0ZVN0YWNrIH0gZnJvbSAnLi4vbGliL2Vjcy1mYXJnYXRlLXN0YWNrJztcbmltcG9ydCB7IE5ldHdvcmtTdGFjayB9IGZyb20gJy4uL2xpYi9uZXR3b3JrLXN0YWNrJztcbmltcG9ydCB7IFJkc1N0YWNrIH0gZnJvbSAnLi4vbGliL3Jkcy1zdGFjayc7XG5cbmNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XG5cbmNvbnN0IG5ldHdvcmtTdGFjayA9IG5ldyBOZXR3b3JrU3RhY2soYXBwLCAnTmV0d29ya1N0YWNrJywge1xuICBlbnY6IHsgYWNjb3VudDogcHJvY2Vzcy5lbnYuQ0RLX0RFRkFVTFRfQUNDT1VOVCwgcmVnaW9uOiBwcm9jZXNzLmVudi5DREtfREVGQVVMVF9SRUdJT04gfSxcbn0pO1xuXG5jb25zdCBlY3NTdGFjayA9IG5ldyBFY3NGYXJnYXRlU3RhY2soYXBwLCAnRWNzRmFyZ2F0ZVN0YWNrJywge1xuICB2cGM6IG5ldHdvcmtTdGFjay52cGMsXG4gIGVudjogeyBhY2NvdW50OiBwcm9jZXNzLmVudi5DREtfREVGQVVMVF9BQ0NPVU5ULCByZWdpb246IHByb2Nlc3MuZW52LkNES19ERUZBVUxUX1JFR0lPTiB9LFxufSk7XG5cbm5ldyBSZHNTdGFjayhhcHAsICdSZHNTdGFjaycsIHtcbiAgdnBjOiBuZXR3b3JrU3RhY2sudnBjLFxuICBiYXN0aW9uU2VjdXJpdHlHcm91cDogbmV0d29ya1N0YWNrLmJhc3Rpb25TZWN1cml0eUdyb3VwLFxuICBkYkluZ3Jlc3NTZWN1cml0eUdyb3VwOiBuZXR3b3JrU3RhY2suZGJJbmdyZXNzU2VjdXJpdHlHcm91cCxcbiAgZW52OiB7XG4gICAgYWNjb3VudDogcHJvY2Vzcy5lbnYuQ0RLX0RFRkFVTFRfQUNDT1VOVCxcbiAgICByZWdpb246IHByb2Nlc3MuZW52LkNES19ERUZBVUxUX1JFR0lPTlxuICB9XG59KTsiXX0=